from django.http import HttpResponse
import urllib2
from lxml import html

def index(request):
    if request.method == 'GET':
        try:
            url = "http://www.onemotoring.com.sg/publish/onemotoring/en/on_the_roads/traffic_news.main.step1.html?viewType=RoadName&filterBy=Expressways&sortBy=8"
            req = urllib2.Request(url, headers={'User-Agent': 'Mozilla/5.0'})
            res = urllib2.urlopen(req)
            html.fromstring(res.read()).xpath()
            print(page.xpath("//text()"))
        except Exception as err:
            print err
    return HttpResponse("Rango says hey there world!")